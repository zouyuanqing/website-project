# 信息收集系统操作手册

本手册详细介绍了信息收集系统的使用方法，包括管理员操作和普通用户操作的完整流程。

## 📋 目录

- [1. 系统概述](#1-系统概述)
- [2. 账户管理](#2-账户管理)
- [3. 管理员操作指南](#3-管理员操作指南)
- [4. 用户操作指南](#4-用户操作指南)
- [5. 支付功能使用](#5-支付功能使用)
- [6. 数据管理](#6-数据管理)
- [7. 系统维护](#7-系统维护)
- [8. 常见问题解答](#8-常见问题解答)

## 1. 系统概述

### 1.1 系统功能

信息收集系统是一个基于Web的在线数据收集平台，主要功能包括：

- **动态表单创建**：管理员可以创建各种类型的表单
- **用户信息收集**：用户可以填写和提交表单
- **数据管理**：查看、审核、导出提交的数据
- **支付集成**：支持微信支付和支付宝支付
- **用户管理**：管理注册用户和权限

### 1.2 用户角色

- **管理员**：拥有系统完全控制权，可以创建表单、管理用户、查看所有数据
- **普通用户**：可以注册登录、填写表单、查看自己的提交记录

### 1.3 系统访问地址

- **系统首页**：http://localhost:5000
- **用户登录**：http://localhost:5000/login
- **管理员登录**：http://localhost:5000/admin/login

## 2. 账户管理

### 2.1 用户注册

1. 访问系统首页，点击"注册"按钮
2. 填写注册信息：
   - **姓名**：真实姓名（必填）
   - **邮箱**：有效邮箱地址（选填，但邮箱和手机号至少填一个）
   - **手机号**：有效手机号（选填，但邮箱和手机号至少填一个）
   - **密码**：至少6位字符（必填）
   - **确认密码**：重复输入密码（必填）
3. 点击"注册"完成账户创建
4. 注册成功后会自动跳转到登录页面

### 2.2 用户登录

1. 访问登录页面
2. 输入登录信息：
   - **登录账号**：邮箱或手机号
   - **密码**：注册时设置的密码
   - **记住我**：可选，勾选后下次访问自动登录
3. 点击"登录"进入系统

### 2.3 管理员登录

**默认管理员账户：**
- 邮箱：admin@demo.com
- 密码：admin123

⚠️ **重要提醒**：首次使用时请立即修改默认密码！

1. 访问管理员登录页面
2. 输入管理员邮箱和密码
3. 点击"登录"进入管理后台

## 3. 管理员操作指南

### 3.1 管理后台概览

登录管理后台后，您将看到：
- **导航栏**：包含管理后台、表单管理、用户管理等选项
- **统计卡片**：显示表单数量、用户数量、提交数量等统计信息
- **最新数据**：显示最近创建的表单和注册的用户

### 3.2 表单管理

#### 3.2.1 创建表单

1. 点击导航栏"表单管理"
2. 点击"创建表单"按钮
3. 填写表单基本信息：
   - **表单标题**：表单的名称（必填）
   - **表单描述**：表单的用途和说明（选填）

4. 添加表单字段：
   - 点击"添加字段"按钮
   - 设置字段属性：
     - **字段名称**：程序内部使用的名称（英文）
     - **字段标签**：用户看到的字段名称
     - **字段类型**：选择合适的字段类型
     - **是否必填**：设置字段是否为必填项
     - **占位符**：字段的提示文字

5. 字段类型说明：
   - **文本**：单行文本输入
   - **文本域**：多行文本输入
   - **数字**：数字输入
   - **邮箱**：邮箱地址输入
   - **日期**：日期选择器
   - **下拉选择**：单选下拉菜单
   - **单选框**：单选按钮组
   - **多选框**：多选按钮组
   - **文件上传**：文件上传功能
   - **微信支付**：微信支付字段
   - **支付宝支付**：支付宝支付字段

6. 对于选择类字段（下拉选择、单选框、多选框）：
   - 在"选项设置"中，每行输入一个选项
   - 例如：
     ```
     选项1
     选项2
     选项3
     ```

7. 对于支付字段（微信支付、支付宝支付）：
   - 需要先在收款账户管理中创建对应的收款账户
   - 在字段设置中选择关联的收款账户

8. 点击"创建表单"完成表单创建

#### 3.2.2 管理现有表单

1. 在"表单管理"页面查看所有表单
2. 对每个表单可以进行以下操作：
   - **查看提交**：查看该表单的所有提交记录
   - **编辑**：修改表单信息（仅限标题、描述、状态）
   - **导出数据**：导出表单提交数据
   - **删除**：删除表单（谨慎操作！）
   - **启用/禁用**：控制表单是否对用户可见

#### 3.2.3 查看表单提交

1. 在表单列表中点击"查看提交"
2. 查看所有提交记录，包括：
   - 提交者信息
   - 提交时间
   - 提交状态（待审核/已通过/已拒绝）
   - 提交内容
3. 可以对提交记录进行审核：
   - 点击"通过"批准提交
   - 点击"拒绝"拒绝提交

### 3.3 用户管理

#### 3.3.1 查看用户列表

1. 点击导航栏"用户管理"
2. 查看所有注册用户的信息：
   - 用户姓名
   - 邮箱地址
   - 手机号码
   - 注册时间
   - 账户状态

#### 3.3.2 管理用户状态

1. 在用户列表中找到目标用户
2. 点击"启用/禁用"按钮切换用户状态
3. 禁用的用户将无法登录系统

#### 3.3.3 批量用户操作

1. 勾选需要操作的用户
2. 选择批量操作类型：
   - **批量启用**：启用选中的用户
   - **批量禁用**：禁用选中的用户
   - **批量删除**：删除选中的用户（谨慎操作！）

### 3.4 收款账户管理

⚠️ **注意**：收款账户功能已从导航栏中移除，但仍可通过直接访问URL使用：
- 收款账户管理：http://localhost:5000/admin/payment-accounts
- 支付管理：http://localhost:5000/admin/payments

#### 3.4.1 创建收款账户

1. 访问收款账户管理页面
2. 点击"添加收款账户"
3. 填写账户信息：
   - **账户名称**：便于识别的名称
   - **账户类型**：微信收款/支付宝收款/银行卡
   - **收款人姓名**：真实姓名
   - **账户号码**：
     - 微信：微信号或绑定手机号
     - 支付宝：支付宝账号（手机号或邮箱）
     - 银行卡：银行卡号
   - **银行信息**：仅银行卡需要填写
   - **备注**：额外说明信息

4. 点击"保存收款账户"完成创建

#### 3.4.2 管理收款账户

1. 在收款账户列表中查看所有账户
2. 可以进行以下操作：
   - **编辑**：修改账户信息
   - **启用/禁用**：控制账户是否可用
   - **查看详情**：查看完整的账户信息

### 3.5 支付订单管理

1. 访问支付管理页面
2. 查看所有支付订单：
   - 订单号
   - 支付金额
   - 支付方式
   - 订单状态
   - 创建时间
   - 支付时间

3. 可以手动更新订单状态：
   - **待支付**：用户尚未支付
   - **已支付**：支付完成
   - **支付失败**：支付过程中出现错误
   - **已取消**：订单被取消

## 4. 用户操作指南

### 4.1 用户中心

登录后，用户可以：
- 查看个人信息
- 查看提交历史
- 查看支付记录
- 访问可用表单

### 4.2 填写表单

#### 4.2.1 查找表单

1. 登录后点击"可用表单"
2. 浏览所有可用的表单
3. 点击表单标题查看详情

#### 4.2.2 填写并提交表单

1. 点击要填写的表单
2. 按照要求填写各个字段：
   - **必填字段**：标有红色星号(*)的字段必须填写
   - **文件上传**：点击"选择文件"上传文件
   - **支付字段**：输入需要支付的金额

3. 检查填写内容是否正确
4. 点击"提交表单"

#### 4.2.3 表单提交后处理

- **无支付字段**：直接提交成功，可在"我的提交"中查看
- **包含支付字段**：将跳转到支付页面完成付款

### 4.3 查看提交记录

1. 在用户中心点击"我的提交"
2. 查看所有提交的表单记录
3. 点击具体记录查看详细内容和审核状态

### 4.4 文件上传说明

#### 4.4.1 支持的文件类型

- **图片**：jpg, jpeg, png, gif, bmp, webp
- **文档**：pdf, doc, docx, xls, xlsx, ppt, pptx, txt
- **视频**：mp4, avi, mov, wmv, flv, mkv
- **音频**：mp3, wav, aac, flac, ogg
- **压缩包**：zip, rar, 7z, tar, gz

#### 4.4.2 文件大小限制

- 单个文件最大：100MB
- 建议压缩大文件后上传

#### 4.4.3 上传注意事项

- 确保文件没有病毒
- 避免上传包含个人敏感信息的文件
- 文件名建议使用英文和数字

## 5. 支付功能使用

### 5.1 支付流程

1. 填写包含支付字段的表单
2. 输入支付金额
3. 提交表单后自动跳转到支付页面
4. 选择支付方式：
   - **微信支付**：扫描二维码支付
   - **支付宝支付**：跳转到支付宝页面

5. 完成支付后返回系统
6. 查看支付凭证和订单状态

### 5.2 支付状态说明

- **待支付**：订单已创建，等待支付
- **处理中**：支付处理中
- **已支付**：支付成功完成
- **支付失败**：支付过程中出现错误
- **已取消**：订单被取消

### 5.3 支付问题处理

如果遇到支付问题：
1. 检查网络连接
2. 确认支付金额正确
3. 尝试刷新页面重新支付
4. 联系管理员处理

## 6. 数据管理

### 6.1 数据导出（管理员）

#### 6.1.1 导出用户数据

1. 进入用户管理页面
2. 点击"导出数据"按钮
3. 选择导出选项：
   - **导出格式**：Excel 或 CSV
   - **包含内容**：
     - 基本信息（用户ID、姓名、注册时间等）
     - 联系信息（邮箱、手机号）
     - 提交统计（提交数量）
     - 活动信息（最后活动时间等）

4. 点击"导出"开始下载

#### 6.1.2 导出表单数据

1. 在表单管理中选择要导出的表单
2. 点击"导出数据"
3. 选择导出选项：
   - **导出格式**：Excel、CSV 或 ZIP（包含附件）
   - **包含内容**：
     - 提交者信息
     - 提交时间
     - 表单数据
     - 附件文件

4. 点击"导出"开始下载

### 6.2 数据备份

建议管理员定期备份以下数据：
- 数据库文件：`form_system.db`
- 上传文件目录：`uploads/`
- 配置文件：`.env`

## 7. 系统维护

### 7.1 日常维护

#### 7.1.1 检查系统状态

- 定期查看错误日志
- 监控磁盘空间使用情况
- 检查用户反馈和问题报告

#### 7.1.2 数据清理

- 定期清理过期的临时文件
- 删除不需要的用户上传文件
- 归档历史数据

#### 7.1.3 安全维护

- 定期更新管理员密码
- 检查用户权限设置
- 更新系统依赖包

### 7.2 性能优化

#### 7.2.1 数据库优化

- 定期重建数据库索引
- 清理无用数据
- 监控数据库大小

#### 7.2.2 文件管理

- 定期清理临时文件
- 压缩历史文件
- 监控存储空间

### 7.3 问题排查

#### 7.3.1 常见问题诊断

1. **用户无法登录**
   - 检查用户账户状态
   - 验证密码是否正确
   - 确认邮箱/手机号是否正确

2. **表单提交失败**
   - 检查表单字段配置
   - 验证文件上传限制
   - 查看服务器错误日志

3. **支付功能异常**
   - 检查支付配置
   - 验证收款账户设置
   - 测试网络连接

#### 7.3.2 日志查看

- 应用日志：`logs/app.log`
- 系统错误日志：查看控制台输出
- 用户操作日志：数据库记录

## 8. 常见问题解答

### 8.1 登录相关

**Q: 忘记密码怎么办？**
A: 目前系统暂不支持自助重置密码，请联系管理员重置。

**Q: 可以用手机号登录吗？**
A: 可以，注册时填写了手机号的用户可以用手机号登录。

**Q: 为什么显示"账户已被禁用"？**
A: 您的账户被管理员禁用，请联系管理员了解原因。

### 8.2 表单相关

**Q: 为什么看不到某个表单？**
A: 可能的原因：
- 表单被管理员禁用
- 您没有登录
- 表单设置了特定的访问权限

**Q: 提交表单后可以修改吗？**
A: 提交后无法直接修改，如需修改请联系管理员。

**Q: 文件上传失败怎么办？**
A: 可能的原因：
- 文件太大（超过100MB）
- 文件格式不支持
- 网络连接问题

### 8.3 支付相关

**Q: 支付后没有反应怎么办？**
A: 请等待几分钟让系统同步支付状态，如果仍然显示未支付，请联系管理员。

**Q: 可以退款吗？**
A: 退款需要联系管理员处理，管理员可以手动调整订单状态。

**Q: 支持哪些支付方式？**
A: 目前支持微信支付和支付宝支付。

### 8.4 技术相关

**Q: 系统支持哪些浏览器？**
A: 建议使用现代浏览器：
- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

**Q: 手机可以使用吗？**
A: 可以，系统支持响应式设计，适配手机端使用。

**Q: 数据会丢失吗？**
A: 系统会自动保存所有数据，建议管理员定期备份。

### 8.5 联系支持

如果您遇到本手册未涵盖的问题，请通过以下方式联系技术支持：

- **系统管理员**：联系您的组织管理员
- **技术支持**：通过GitHub Issues提交问题
- **紧急问题**：联系系统运维人员

---

## 📞 技术支持信息

- **操作手册版本**：v1.0.0
- **最后更新时间**：2025年1月20日
- **适用系统版本**：信息收集系统 v1.0.0+

**感谢您使用信息收集系统！**

如果本操作手册对您有帮助，请将其分享给其他用户。如果您发现任何错误或有改进建议，欢迎反馈给我们。